<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>vega: vega</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">vega
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">vega </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>C++ library for reading/writing/editing DICOM files. Detailed documentation can be found <a href="https://project-eutopia.github.io/vega/">here</a>.</p>
<h2>Getting started</h2>
<p>To get started, clone the repository:</p>
<div class="fragment"><div class="line">git clone https://github.com/project-eutopia/vega.git</div></div><!-- fragment --><p>To compile and install the shared library to your system, take the following steps:</p>
<div class="fragment"><div class="line">mkdir build</div><div class="line">cd build</div><div class="line">cmake ..</div><div class="line">sudo make -j8 install</div></div><!-- fragment --><p>To compile code that uses this library, you should link the library, the zlib library, and have to use at least C++11 standard:</p>
<div class="fragment"><div class="line">clang++ --std=c++11 -lvega -lz my_code.cpp -o my_code</div></div><!-- fragment --><h2>Reading/writing files</h2>
<p>Here is a simple example of using the library to read a file in and print a string representation of the content to standard out.</p>
<div class="fragment"><div class="line">{C++}</div><div class="line">#include &lt;string&gt;</div><div class="line"></div><div class="line">#include &quot;vega/dictionary/dictionary.h&quot;</div><div class="line">#include &quot;vega/dicom/file.h&quot;</div><div class="line"></div><div class="line">int main() {</div><div class="line">  // Set the dictionary file</div><div class="line">  vega::dictionary::Dictionary::set_dictionary(&quot;/path/to/dictionary/dictionary.txt&quot;);</div><div class="line"></div><div class="line">  // Read the DICOM file in</div><div class="line">  const std::string file_name = &quot;/path/to/dicom/file/dicom.dcm&quot;;</div><div class="line">  vega::dicom::File file(file_name);</div><div class="line"></div><div class="line">  // Print a human-friendly representation of the file to std::cout</div><div class="line">  vega::Logger logger(std::cout);</div><div class="line">  file.data_set()-&gt;log(logger);</div><div class="line">}</div></div><!-- fragment --><p>To write a DICOM file, you call the <code><a class="el" href="classvega_1_1dicom_1_1File.html#a04a1a4c4f4b1257b419b3d428a85eb32">vega::dicom::File::write</a></code> method, either passing in a string that represents the file name, or a <code>std::shared_ptr&lt;std::ostream&gt;</code> pointer to an output stream.</p>
<h2>Creating new DICOM file</h2>
<p>To create a new DICOM file, use the <code>File</code> constructor with either <code>const SOPClass&amp;</code> reference, or a <code>const SOPClass&amp;</code> reference and <code>const UID&amp;</code> reference to a SOP instance UID.</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">vega::dicom::File file(vega::dicom::SOPClass(&quot;RT Plan Storage&quot;), vega::UID(&quot;1.2.3.4.5&quot;));</div></div><!-- fragment --><h2>Editing a DICOM file</h2>
<p>The rough <a href="http://dicom.nema.org/dicom/2013/output/chtml/part05/chapter_7.html">structure of a DICOM file</a> is that at the root of a DICOM file is a single <a href="https://project-eutopia.github.io/vega/classvega_1_1dicom_1_1DataSet.html"><b>data set</b></a>, where each data set contains a set of <a href="https://project-eutopia.github.io/vega/classvega_1_1dicom_1_1DataElement.html"><b>data elements</b></a>. A data element is identified by a unique <b>tag</b>, which is a pair of 2 byte unsigned integers, often represented in hexadecimal, for instance (300A,00C2) is the tag corresponding to "Beam Name". A data set contains at most one data element for each tag, so it is effectively a map from tags to data elements. Each data element contains some data whose interpretation is determined by the tag, for instance (0010,0010) which corresponds to the patient's name. The storage format of the data is determined by the <a href="https://project-eutopia.github.io/vega/classvega_1_1VR.html"><b>value representation</b></a> (or VR).</p>
<p>Each <code>File</code> object has a <code>data_set()</code> method which returns a <code>shared_ptr</code> to the root <code><a class="el" href="classvega_1_1dicom_1_1DataSet.html" title="Stores a set of DataElements. ">vega::dicom::DataSet</a></code> object. <code>DataSet</code> has iterators for going through each <code>DataElement</code>, and also offers many useful methods for selecting a specific <code>DataElement</code>. You can search for a <code>DataElement</code> using a dictionary element string name, e.g. <code>"PatientName"</code> or a tag like <code>Tag{0x0010,0x0010}</code>.</p>
<p>The data stored inside each <code>DataElement</code> is accessed through what is called a <a href="https://project-eutopia.github.io/vega/namespacevega_1_1manipulators.html"><b>manipulator</b></a>. Each manipulator, for instance <code><a class="el" href="classvega_1_1manipulators_1_1DateManipulator.html">vega::manipulators::DateManipulator</a></code> is used for data elements with VR DA (corresponding to "date"). This manipulator acts very much like a <code>std::vector</code> of <code><a class="el" href="classvega_1_1Date.html">vega::Date</a></code> objects which makes reading, adding, and modifying data very easy. The translation to the behind-the-scenes DICOM formats is hidden from the user.</p>
<p>In addition to <code>DataElement</code>, there is also an easier to use class <code><a class="el" href="classvega_1_1dicom_1_1Element.html" title="A useful wrapper class over the more standard DataElement. ">vega::dicom::Element</a>&lt;T&gt;</code>, where <code>T</code> is a dictionary element type (e.g. <code>vega::dictionary::PatientName</code>, see <code>include/vega/dictionary_data.h</code> for all possibilities). The benefit of using this class is that you do not need to make explicit the manipulator class, as it is implied by the type (e.g. <code>vega::dictionary::PatientName::manipulator_type</code> is the expected <code>PersonNameManipulator</code>). As an example of adding patient name to a new data set:</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">auto element = data_set-&gt;new_element&lt;vega::dictionary::PatientName&gt;();</div><div class="line">element-&gt;manipulator()-&gt;push_back(&quot;Smith^Alice&quot;);</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
